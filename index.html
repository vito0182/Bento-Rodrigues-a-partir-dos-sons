<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>BENTO RODRIGUES ATRAVÉS DOS SONS</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT" crossorigin="anonymous">

  <link rel="stylesheet" href="style.css">

</head>

<body>
  <div class="modal fade" id="center" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-5" id="centerTitle">Modal title</h1>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body" id="centerBody">
          ...
        </div>
      </div>
    </div>
  </div>
  
    <div class="title">
      <h1>BENTO RODRIGUES ATRAVÉS DOS SONS</h1>
    </div>
    <div id="content">
    <div class="container-fluid" style="margin-top:40px;">
      <h1 style="font-family: 'KohinoorTeleguBold'; font-size: 1.3em;">Projeto "Sonoridades Históricas de Bento Rodrigues"</h1>
      <p style="text-align:justify;padding: 20px 0px 20px 0px;">No segundo semestre de 2022, foi desenvolvido o
        projeto
        pedagógico “Sonoridades Históricas de Bento Rodrigues” com alunos do 6º ano, face à parceria promovida entre
        a Escola Municipal Bento Rodrigues e a equipe de docentes e estudantes do projeto “Gualaxo Vivo: histórias
        através de sons”, vinculado à Universidade Federal de Ouro Preto (UFOP). O objetivo deste projeto foi
        proceder à identificação de sons históricos que ecoavam no Subdistrito de Bento Rodrigues antes da queda da
        Barragem de Fundão, recorrendo, para isso, às memórias dos(as) alunos(as) do 6º ano, de forma associada ao
        levantamento de áudios e imagens, bem como à elaboração de textos pelos próprios estudantes. Tais produções
        encontram-se veiculadas nesta plataforma digital, da qual os(as) alunos(a) aprenderam a acionar códigos
        básicos, a fim de que ela possa ser continuamente atualizada pelos integrantes da Escola.</p>
      
      <img src="mapa Bento Rodrigues-com icones.png" class="img-fluid" id="map" usemap="#workmap">
      <map name="workmap" id="map_areas" width="100%" height="100%">
            <!--<area shape="rect" coords="173.39999389648438, 77.52499389648438, 215.39999389648438, 106.52499389648438" alt="people" href="#">
            <area shape="rect" coords="196.39999389648438, 132.52499389648438, 233.39999389648438, 168.52499389648438" alt="person" href="#">
            <area shape="circle" coords="337,300,44" alt="Cup of coffee" href="#">-->
      </map>
    </div>
  </div>
  <div class="container-fluid" id="students_container">
    <div class="container" style="text-align:center; padding: 70px 0px 0px 0px;">
      <span>Produção dos/das estudantes do 6º ano/2022 da </span> <br>
      <h6>ESCOLA MUNICIPAL BENTO RODRIGUES</h6>
      <span style="font-size:small;"> Secretaria Municipal de Educação de Mariana – MG <br>
        Profa. de História: Silvany Ferreira Diniz - Diretora: Eliene Geralda dos Santos</span>
    </div>
    <div class="row row-cols-auto justify-content-around" id="students_row">
      <!--Students GRID-->
    </div>
  </div>

  <div class="container-fluid footer">
    <div class="row row-cols-auto justify-content-around">
      <div class="col-md">
          <span>
              Apoio: <br>
              <ul>
                <li>Departamento de Música – Instituto de Filosofia, Arte e Cultura</li>
                <li>Programa de Pós-graduação em História</li>
                <li>Projeto “Gualaxo Vivo: histórias através de sons” (www.gualaxovivo.com.br)</li>
              </ul>
          </span>
      </div>
      <div class="col-md">
        <span>
          Realização <br>
          <ul>
            <li>Osvaldo Novais Júnior, coordenador do projeto Programa Ação (IFMG)</li>
            <li>Bolsistas do Programa Ação (IFMG)</li>
          </ul>
      </span>
      </div>
    </div>
  </div>
  <div class="row row-cols-auto justify-content-around logos">
    <div class="col-sm">
      <a href="https://ufop.br/">
        <img src="logo-ufop.png" alt="" class="">
      </a>
    </div>
    <div class="col-sm">
      <a href="http://www.ouropreto.ifmg.edu.br/">
        <img src="logo-ifmg.png" alt="" class="">
      </a>
    </div>
    <div class="col-sm">
      <a href="https://codaaut.ouropreto.ifmg.edu.br/">
        <img src="logo-programação.png" alt="" class="">
      </a>
    </div>
  </div>


  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-u1OknCvxWvY5kfmNBILK2hRnQC3Pr17a+RTT6rIHI7NnikvbZlHgTPOOmMi466C8" crossorigin="anonymous">
    </script>

  <script type="text/javascript" src="students.js"></script>
  <script type="text/javascript" src="map_buttons.js"></script>
  <script>

    var popoverTriggerList = document.querySelectorAll('[data-bs-toggle="popover"]')
    var popoverList = [...popoverTriggerList].map(popoverTriggerEl => new bootstrap.Popover(popoverTriggerEl))


    var button_names = Object.keys(map_buttons)

    var map = document.getElementById('map')
    map.addEventListener('click', function (event) {
      let rect = map.getBoundingClientRect()
      console.log(`${(event.pageX - rect.x) / rect.width}, ${(event.pageY - (rect.y + window.scrollY)) / rect.height}`)
      x = (event.pageX - rect.x) / rect.width
      y = (event.pageY - (rect.y + window.scrollY)) / rect.height

      /*for (i=0; i<button_names.length; i++){
        console.log('x', map_buttons[button_names[i]][0], x, map_buttons[button_names[i]][2])
        if(map_buttons[button_names[i]][0] <= x && map_buttons[button_names[i]][2] >= x){
          console.log('y', map_buttons[button_names[i]][1], y, map_buttons[button_names[i]][3])
          if(map_buttons[button_names[i]][1] >= y && map_buttons[button_names[i]][3] <= y){
            console.log(button_names[i], " apertado")
          }
        }
        
      }*/
    })

    let map_areas = document.getElementById('map_areas')

    for (i = 0; i < button_names.length; i++) {
      let new_area = document.createElement('area')
      new_area.shape = 'rect'
      let button_coords = map_buttons[button_names[i]].pos
      let rect = map.getBoundingClientRect()
      new_area.id = button_names[i]
      new_area.href = "#" + button_names[i]
      new_area.coords = `${button_coords[0] * map.offsetWidth}, ${button_coords[1] * map.offsetHeight}, ${button_coords[2] * map.offsetWidth}, ${button_coords[3] * map.offsetHeight}`

      new_area.setAttribute('data-bs-toggle', "modal")

      new_area.setAttribute('data-bs-target', "#center")

      new_area.addEventListener('click', function () {
        document.getElementById("centerTitle").innerHTML = `${this.id}`
        document.getElementById("centerBody").innerHTML = `
        <img src="${'map_images/' + map_buttons[this.id].image}" class="clickable" data-bs-placement="bottom" data-bs-toggle="popover" data-bs-title="${this.id}" data-bs-content="${map_buttons[this.id].image_description}">
        
        <p class="card-text" style="text-align:center;">${map_buttons[this.id].text}</p>
        <audio controls autoplay="true" data-bs-toggle="tooltip" data-bs-placement="top" title="Referência do áudio:  gravação na casa dos alunos do 6° ano.">
          <source src="${map_buttons[this.id].audio}" type="audio/mpeg">
                <a href="${map_buttons[this.id].audio}">
                    Download audio
                </a>
        </audio>
        `
        popoverTriggerList = document.querySelectorAll('[data-bs-toggle="popover"]')
        popoverList = [...popoverTriggerList].map(popoverTriggerEl => new bootstrap.Popover(popoverTriggerEl))
        var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
        var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
          return new bootstrap.Tooltip(tooltipTriggerEl)
        })
      })

      map_areas.appendChild(new_area)

    }

    document.getElementById('center').addEventListener('hide.bs.modal', () => {
      document.querySelectorAll('audio').forEach(el => el.pause());
    })

    function update_areas_coords() {
      for (i = 0; i < button_names.length; i++) {
        let rect = map.getBoundingClientRect()
        let button_coords = map_buttons[button_names[i]].pos
        document.getElementById(button_names[i]).coords = `${button_coords[0] * map.offsetWidth}, ${button_coords[1] * map.offsetHeight}, ${button_coords[2] * map.offsetWidth}, ${button_coords[3] * map.offsetHeight}`
      }
    }

    setTimeout(() => { update_areas_coords() }, 100)
    setTimeout(() => { update_areas_coords() }, 1000)
    setTimeout(() => { update_areas_coords() }, 5000)


    window.addEventListener('resize', () => {
      update_areas_coords()
    })

  </script>
  <script>
    var students_row = document.getElementById('students_row')
    var current_student = {}
    for (let i = 0; i < students.length; i++) {
      let student_col = document.createElement('div')
      student_col.classList.add("card")
      student_col.classList.add("student_col")

      student_col.style.marginInline = "10px"
      student_col.style.marginTop = "10px"

      student_col.id = `student_col_${i}`
      student_col.setAttribute('data-bs-toggle', "modal")

      student_col.setAttribute('data-bs-target', "#center")
      student_col.innerHTML = `
      <img src="./quadradas/${students[i].image}" alt="" class="icon">
      <h5 class="card-title student_name">${students[i].name}</h5>
      `
      student_col.addEventListener('click', function () {

        let names = this.id.split("_")
        let index = Number.parseInt(names[names.length - 1])
        console.log(index)
        document.getElementById("centerTitle").innerHTML = `${students[index].name}`
        document.getElementById("centerBody").innerHTML = `${students[index].description}`

      }, false)


      students_row.appendChild(student_col)
    }

  </script>

</body>

</html>